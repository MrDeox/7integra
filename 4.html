<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Controle - Granja de Suínos</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #27ae60;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 0 0 10px 10px;
        }
        
        h1 {
            font-size: 2rem;
        }
        
        .tabs {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab-button {
            padding: 10px 20px;
            background-color: var(--light-color);
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
        }
        
        .tab-button:hover {
            background-color: #ddd;
        }
        
        .tab-button.active {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            background-color: white;
            border-radius: 0 5px 5px 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .btn-danger {
            background-color: var(--accent-color);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #219653;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: var(--primary-color);
            color: white;
        }
        
        tr:hover {
            background-color: #f5f5f5;
        }
        
        .result-box {
            background-color: var(--light-color);
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            font-size: 1.2rem;
        }
        
        .calendar {
            width: 100%;
            margin-top: 20px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .calendar-day {
            padding: 10px;
            border: 1px solid #ddd;
            min-height: 80px;
            background-color: white;
        }
        
        .calendar-day-header {
            font-weight: bold;
            text-align: center;
            padding: 5px;
            background-color: var(--light-color);
        }
        
        .event {
            background-color: var(--secondary-color);
            color: white;
            padding: 2px 5px;
            border-radius: 3px;
            margin-bottom: 2px;
            font-size: 0.8rem;
            cursor: pointer;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 20px;
            border-radius: 5px;
            width: 80%;
            max-width: 500px;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: black;
        }
        
        .color-option {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 5px;
            cursor: pointer;
            border: 1px solid #ddd;
        }
        
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .tab-button {
                margin-right: 0;
                margin-bottom: 5px;
                border-radius: 5px;
            }
            
            .tab-content {
                border-radius: 5px;
            }
            
            .calendar-day {
                min-height: 60px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Sistema de Controle - Granja de Suínos Integrada</h1>
        </div>
    </header>
    
    <div class="container">
        <div class="tabs">
            <button class="tab-button active" data-tab="racao">Gestão de Ração</button>
            <button class="tab-button" data-tab="mortalidade">Cálculo de Mortalidade</button>
            <button class="tab-button" data-tab="gpd">Cálculo de GPD</button>
            <button class="tab-button" data-tab="barracoes">Gestão de Barracões</button>
            <button class="tab-button" data-tab="calendario">Calendário</button>
            <button class="tab-button" data-tab="rendimento">Rendimento por Caminhão</button>
            <button class="tab-button" data-tab="os">Ordens de Serviço</button>
            <button class="tab-button" data-tab="contato">Contato</button>
        </div>
        
        <!-- Gestão de Ração -->
        <div id="racao" class="tab-content active">
            <h2>Gestão de Ração</h2>
            
            <div class="form-group">
                <label for="racao-quantidade">Quantidade Recebida (kg):</label>
                <input type="number" id="racao-quantidade" step="0.01">
            </div>
            
            <div class="form-group">
                <label for="silos-quantidade">Número de Silo(s):</label>
                <input type="number" id="silos-quantidade" min="1" value="1">
            </div>
            
            <div id="silos-container">
                <!-- Silo inputs will be added here dynamically -->
            </div>
            
            <button id="distribuir-auto" class="btn-success">Distribuir Automaticamente</button>
            <button id="salvar-racao">Salvar Distribuição</button>
            
            <div id="racao-result" class="result-box" style="display: none;">
                <h3>Resumo da Distribuição</h3>
                <div id="racao-summary"></div>
            </div>
        </div>
        
        <!-- Cálculo de Mortalidade -->
        <div id="mortalidade" class="tab-content">
            <h2>Cálculo de Mortalidade</h2>
            
            <div class="form-group">
                <label for="animais-iniciais">Número Inicial de Animais:</label>
                <input type="number" id="animais-iniciais" min="1">
            </div>
            
            <div class="form-group">
                <label for="animais-baixas">Número de Baixas:</label>
                <input type="number" id="animais-baixas" min="0">
            </div>
            
            <button id="calcular-mortalidade">Calcular Mortalidade</button>
            
            <div id="mortalidade-result" class="result-box" style="display: none;">
                <h3>Resultado</h3>
                <p>Animais Atuais: <span id="animais-atuais"></span></p>
                <p>Taxa de Mortalidade: <span id="taxa-mortalidade"></span>%</p>
            </div>
        </div>
        
        <!-- Cálculo de GPD -->
        <div id="gpd" class="tab-content">
            <h2>Cálculo de GPD (Ganho de Peso Diário)</h2>
            
            <div class="form-group">
                <label for="peso-inicial">Peso Inicial (kg):</label>
                <input type="number" id="peso-inicial" step="0.01" min="0">
            </div>
            
            <div class="form-group">
                <label for="peso-atual">Peso Atual (kg):</label>
                <input type="number" id="peso-atual" step="0.01" min="0">
            </div>
            
            <div class="form-group">
                <label for="dias-gpd">Dias entre Pesagens:</label>
                <input type="number" id="dias-gpd" min="1">
            </div>
            
            <button id="calcular-gpd">Calcular GPD</button>
            
            <div id="gpd-result" class="result-box" style="display: none;">
                <h3>Resultado</h3>
                <p>Ganho de Peso Diário (GPD): <span id="valor-gpd"></span> kg/dia</p>
            </div>
        </div>
        
        <!-- Gestão de Barracões -->
        <div id="barracoes" class="tab-content">
            <h2>Gestão de Barracões</h2>
            
            <div class="form-group">
                <label for="barracoes-quantidade">Número de Barracões:</label>
                <input type="number" id="barracoes-quantidade" min="1" value="1">
            </div>
            
            <button id="gerar-barracoes">Gerar Formulários</button>
            
            <div id="barracoes-container">
                <!-- Barracão inputs will be added here dynamically -->
            </div>
            
            <button id="salvar-barracoes" style="display: none;">Salvar Dados</button>
            
            <div id="barracoes-summary" style="margin-top: 20px; display: none;">
                <h3>Resumo dos Barracões</h3>
                <table id="barracoes-table">
                    <thead>
                        <tr>
                            <th>Barracão</th>
                            <th>Machos</th>
                            <th>Fêmeas</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
        
        <!-- Calendário -->
        <div id="calendario" class="tab-content">
            <h2>Calendário Interativo</h2>
            
            <button id="adicionar-evento">Adicionar Evento</button>
            
            <div class="calendar">
                <div class="calendar-header">
                    <button id="prev-month">&lt; Mês Anterior</button>
                    <h3 id="current-month">Mês Ano</h3>
                    <button id="next-month">Próximo Mês &gt;</button>
                </div>
                
                <div class="calendar-grid" id="calendar-days-header">
                    <div class="calendar-day-header">Dom</div>
                    <div class="calendar-day-header">Seg</div>
                    <div class="calendar-day-header">Ter</div>
                    <div class="calendar-day-header">Qua</div>
                    <div class="calendar-day-header">Qui</div>
                    <div class="calendar-day-header">Sex</div>
                    <div class="calendar-day-header">Sáb</div>
                </div>
                
                <div class="calendar-grid" id="calendar-days"></div>
            </div>
        </div>
        
        <!-- Rendimento por Caminhão -->
        <div id="rendimento" class="tab-content">
            <h2>Cálculo de Rendimento por Caminhão</h2>
            
            <div class="form-group">
                <label for="peso-caminhao">Peso Médio por Caminhão (kg):</label>
                <input type="number" id="peso-caminhao" step="0.01" min="0">
            </div>
            
            <div class="form-group">
                <label for="valor-kg">Valor por Quilo (R$):</label>
                <input type="number" id="valor-kg" step="0.01" min="0">
            </div>
            
            <div class="form-group">
                <label for="caminhoes-dia">Número de Caminhões por Dia:</label>
                <input type="number" id="caminhoes-dia" min="1" value="1">
            </div>
            
            <div class="form-group">
                <label for="dias-lote">Dias de Envio do Lote:</label>
                <input type="number" id="dias-lote" min="1" value="1">
            </div>
            
            <button id="calcular-rendimento">Calcular Rendimento</button>
            
            <div id="rendimento-result" class="result-box" style="display: none;">
                <h3>Resultado</h3>
                <p>Valor Bruto por Caminhão: R$ <span id="valor-caminhao"></span></p>
                <p>Valor Bruto por Dia: R$ <span id="valor-dia"></span></p>
                <p>Valor Bruto Total do Lote: R$ <span id="valor-lote"></span></p>
            </div>
        </div>
        
        <!-- Ordens de Serviço -->
        <div id="os" class="tab-content">
            <h2>Ordens de Serviço (OS)</h2>
            
            <button id="nova-os">Nova Ordem de Serviço</button>
            
            <table id="os-table">
                <thead>
                    <tr>
                        <th>Título</th>
                        <th>Descrição</th>
                        <th>Prioridade</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        
        <!-- Contato -->
        <div id="contato" class="tab-content">
            <h2>Contato com o Administrador</h2>
            
            <div class="form-group">
                <label for="contato-nome">Seu Nome:</label>
                <input type="text" id="contato-nome">
            </div>
            
            <div class="form-group">
                <label for="contato-email">Seu Email:</label>
                <input type="email" id="contato-email">
            </div>
            
            <div class="form-group">
                <label for="contato-telefone">Seu Telefone:</label>
                <input type="tel" id="contato-telefone">
            </div>
            
            <div class="form-group">
                <label for="contato-mensagem">Mensagem:</label>
                <textarea id="contato-mensagem" rows="5"></textarea>
            </div>
            
            <button id="enviar-contato">Enviar Mensagem</button>
            
            <div id="contato-result" class="result-box" style="display: none; margin-top: 20px;"></div>
        </div>
    </div>
    
    <!-- Modal para Adicionar Evento -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Adicionar Evento</h2>
            
            <div class="form-group">
                <label for="event-title">Título do Evento:</label>
                <input type="text" id="event-title">
            </div>
            
            <div class="form-group">
                <label for="event-date">Data:</label>
                <input type="date" id="event-date">
            </div>
            
            <div class="form-group">
                <label for="event-description">Descrição:</label>
                <textarea id="event-description" rows="3"></textarea>
            </div>
            
            <div class="form-group">
                <label>Cor do Evento:</label>
                <div>
                    <div class="color-option" style="background-color: #3498db;" data-color="#3498db"></div>
                    <div class="color-option" style="background-color: #e74c3c;" data-color="#e74c3c"></div>
                    <div class="color-option" style="background-color: #2ecc71;" data-color="#2ecc71"></div>
                    <div class="color-option" style="background-color: #f39c12;" data-color="#f39c12"></div>
                    <div class="color-option" style="background-color: #9b59b6;" data-color="#9b59b6"></div>
                    <input type="hidden" id="event-color" value="#3498db">
                </div>
            </div>
            
            <button id="save-event">Salvar Evento</button>
        </div>
    </div>
    
    <!-- Modal para OS -->
    <div id="os-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="os-modal-title">Nova Ordem de Serviço</h2>
            
            <div class="form-group">
                <label for="os-titulo">Título:</label>
                <input type="text" id="os-titulo">
            </div>
            
            <div class="form-group">
                <label for="os-descricao">Descrição:</label>
                <textarea id="os-descricao" rows="5"></textarea>
            </div>
            
            <div class="form-group">
                <label for="os-prioridade">Prioridade:</label>
                <select id="os-prioridade">
                    <option value="Baixa">Baixa</option>
                    <option value="Média">Média</option>
                    <option value="Alta">Alta</option>
                    <option value="Urgente">Urgente</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="os-status">Status:</label>
                <select id="os-status">
                    <option value="Aberto">Aberto</option>
                    <option value="Em andamento">Em andamento</option>
                    <option value="Concluído">Concluído</option>
                </select>
            </div>
            
            <input type="hidden" id="os-id">
            
            <button id="save-os">Salvar OS</button>
            <button id="delete-os" class="btn-danger" style="display: none;">Excluir OS</button>
        </div>
    </div>
    
    <script>
        // Tab functionality
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons and content
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked button
                button.classList.add('active');
                
                // Show corresponding content
                const tabId = button.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Gestão de Ração
        document.getElementById('silos-quantidade').addEventListener('change', function() {
            const silosQty = parseInt(this.value);
            const container = document.getElementById('silos-container');
            container.innerHTML = '';
            
            for (let i = 1; i <= silosQty; i++) {
                const div = document.createElement('div');
                div.className = 'form-group';
                div.innerHTML = `
                    <label for="silo-${i}">Capacidade do Silo ${i} (kg):</label>
                    <input type="number" id="silo-${i}" step="0.01" min="0">
                    <label for="racao-silo-${i}">Ração no Silo ${i} (kg):</label>
                    <input type="number" id="racao-silo-${i}" step="0.01" min="0" value="0">
                `;
                container.appendChild(div);
            }
        });
        
        document.getElementById('distribuir-auto').addEventListener('click', function() {
            const totalRacao = parseFloat(document.getElementById('racao-quantidade').value) || 0;
            const silosQty = parseInt(document.getElementById('silos-quantidade').value) || 1;
            
            if (totalRacao <= 0) {
                alert('Informe a quantidade de ração recebida');
                return;
            }
            
            const racaoPorSilo = totalRacao / silosQty;
            
            for (let i = 1; i <= silosQty; i++) {
                const siloInput = document.getElementById(`racao-silo-${i}`);
                if (siloInput) {
                    siloInput.value = racaoPorSilo.toFixed(2);
                }
            }
        });
        
        document.getElementById('salvar-racao').addEventListener('click', function() {
            const silosQty = parseInt(document.getElementById('silos-quantidade').value) || 0;
            let summaryHTML = '<ul>';
            let totalDistribuido = 0;
            
            for (let i = 1; i <= silosQty; i++) {
                const capacidade = parseFloat(document.getElementById(`silo-${i}`).value) || 0;
                const racao = parseFloat(document.getElementById(`racao-silo-${i}`).value) || 0;
                
                summaryHTML += `<li>Silo ${i}: ${racao.toFixed(2)}kg (${((racao/capacidade)*100).toFixed(1)}% da capacidade)</li>`;
                totalDistribuido += racao;
            }
            
            summaryHTML += `</ul><p><strong>Total Distribuído:</strong> ${totalDistribuido.toFixed(2)}kg</p>`;
            
            document.getElementById('racao-summary').innerHTML = summaryHTML;
            document.getElementById('racao-result').style.display = 'block';
        });
        
        // Cálculo de Mortalidade
        document.getElementById('calcular-mortalidade').addEventListener('click', function() {
            const animaisIniciais = parseInt(document.getElementById('animais-iniciais').value) || 0;
            const baixas = parseInt(document.getElementById('animais-baixas').value) || 0;
            
            if (animaisIniciais <= 0) {
                alert('Informe o número inicial de animais');
                return;
            }
            
            const animaisAtuais = animaisIniciais - baixas;
            const taxaMortalidade = (baixas / animaisIniciais) * 100;
            
            document.getElementById('animais-atuais').textContent = animaisAtuais;
            document.getElementById('taxa-mortalidade').textContent = taxaMortalidade.toFixed(2);
            document.getElementById('mortalidade-result').style.display = 'block';
        });
        
        // Cálculo de GPD
        document.getElementById('calcular-gpd').addEventListener('click', function() {
            const pesoInicial = parseFloat(document.getElementById('peso-inicial').value) || 0;
            const pesoAtual = parseFloat(document.getElementById('peso-atual').value) || 0;
            const dias = parseInt(document.getElementById('dias-gpd').value) || 0;
            
            if (pesoInicial <= 0 || pesoAtual <= 0 || dias <= 0) {
                alert('Preencha todos os campos com valores válidos');
                return;
            }
            
            const gpd = (pesoAtual - pesoInicial) / dias;
            
            document.getElementById('valor-gpd').textContent = gpd.toFixed(3);
            document.getElementById('gpd-result').style.display = 'block';
        });
        
        // Gestão de Barracões
        document.getElementById('gerar-barracoes').addEventListener('click', function() {
            const barracoesQty = parseInt(document.getElementById('barracoes-quantidade').value) || 0;
            const container = document.getElementById('barracoes-container');
            container.innerHTML = '';
            
            if (barracoesQty <= 0) {
                alert('Informe o número de barracões');
                return;
            }
            
            for (let i = 1; i <= barracoesQty; i++) {
                const div = document.createElement('div');
                div.className = 'form-group';
                div.innerHTML = `
                    <h3>Barracão ${i}</h3>
                    <label for="barracao-${i}-machos">Número de Machos:</label>
                    <input type="number" id="barracao-${i}-machos" min="0">
                    <label for="barracao-${i}-femeas">Número de Fêmeas:</label>
                    <input type="number" id="barracao-${i}-femeas" min="0">
                `;
                container.appendChild(div);
            }
            
            document.getElementById('salvar-barracoes').style.display = 'block';
        });
        
        document.getElementById('salvar-barracoes').addEventListener('click', function() {
            const barracoesQty = parseInt(document.getElementById('barracoes-quantidade').value) || 0;
            const tableBody = document.querySelector('#barracoes-table tbody');
            tableBody.innerHTML = '';
            
            let totalMachos = 0;
            let totalFemeas = 0;
            
            for (let i = 1; i <= barracoesQty; i++) {
                const machos = parseInt(document.getElementById(`barracao-${i}-machos`).value) || 0;
                const femeas = parseInt(document.getElementById(`barracao-${i}-femeas`).value) || 0;
                const total = machos + femeas;
                
                tableBody.innerHTML += `
                    <tr>
                        <td>Barracão ${i}</td>
                        <td>${machos}</td>
                        <td>${femeas}</td>
                        <td>${total}</td>
                    </tr>
                `;
                
                totalMachos += machos;
                totalFemeas += femeas;
            }
            
            // Add totals row
            tableBody.innerHTML += `
                <tr style="font-weight: bold;">
                    <td>Total</td>
                    <td>${totalMachos}</td>
                    <td>${totalFemeas}</td>
                    <td>${totalMachos + totalFemeas}</td>
                </tr>
            `;
            
            document.getElementById('barracoes-summary').style.display = 'block';
        });
        
        // Calendário
        let currentDate = new Date();
        let events = [];
        
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            document.getElementById('current-month').textContent = 
                `${currentDate.toLocaleString('default', { month: 'long' })} ${year}`;
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            
            const calendarDays = document.getElementById('calendar-days');
            calendarDays.innerHTML = '';
            
            // Empty cells for days before the first day of the month
            for (let i = 0; i < firstDay.getDay(); i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                calendarDays.appendChild(emptyDay);
            }
            
            // Days of the month
            for (let i = 1; i <= daysInMonth; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day';
                day.textContent = i;
                day.setAttribute('data-date', `${year}-${month + 1}-${i}`);
                
                // Add events to the day
                const dayEvents = events.filter(event => {
                    const eventDate = new Date(event.date);
                    return eventDate.getFullYear() === year && 
                           eventDate.getMonth() === month && 
                           eventDate.getDate() === i;
                });
                
                dayEvents.forEach(event => {
                    const eventElement = document.createElement('div');
                    eventElement.className = 'event';
                    eventElement.textContent = event.title;
                    eventElement.style.backgroundColor = event.color;
                    eventElement.setAttribute('data-id', event.id);
                    day.appendChild(eventElement);
                });
                
                calendarDays.appendChild(day);
            }
        }
        
        document.getElementById('prev-month').addEventListener('click', function() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        });
        
        document.getElementById('next-month').addEventListener('click', function() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        });
        
        // Event Modal
        const eventModal = document.getElementById('event-modal');
        const eventModalClose = document.querySelector('#event-modal .close');
        const addEventBtn = document.getElementById('adicionar-evento');
        const saveEventBtn = document.getElementById('save-event');
        
        addEventBtn.addEventListener('click', function() {
            document.getElementById('event-date').valueAsDate = new Date();
            document.getElementById('event-title').value = '';
            document.getElementById('event-description').value = '';
            document.getElementById('event-color').value = '#3498db';
            eventModal.style.display = 'block';
        });
        
        eventModalClose.addEventListener('click', function() {
            eventModal.style.display = 'none';
        });
        
        window.addEventListener('click', function(event) {
            if (event.target === eventModal) {
                eventModal.style.display = 'none';
            }
        });
        
        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.color-option').forEach(opt => {
                    opt.style.border = '1px solid #ddd';
                });
                this.style.border = '2px solid #000';
                document.getElementById('event-color').value = this.getAttribute('data-color');
            });
        });
        
        saveEventBtn.addEventListener('click', function() {
            const title = document.getElementById('event-title').value;
            const date = document.getElementById('event-date').value;
            const description = document.getElementById('event-description').value;
            const color = document.getElementById('event-color').value;
            
            if (!title || !date) {
                alert('Preencha pelo menos o título e a data do evento');
                return;
            }
            
            const event = {
                id: Date.now(),
                title,
                date,
                description,
                color
            };
            
            events.push(event);
            eventModal.style.display = 'none';
            renderCalendar();
        });
        
        // Rendimento por Caminhão
        document.getElementById('calcular-rendimento').addEventListener('click', function() {
            const peso = parseFloat(document.getElementById('peso-caminhao').value) || 0;
            const valorKg = parseFloat(document.getElementById('valor-kg').value) || 0;
            const caminhoesDia = parseInt(document.getElementById('caminhoes-dia').value) || 0;
            const diasLote = parseInt(document.getElementById('dias-lote').value) || 0;
            
            if (peso <= 0 || valorKg <= 0 || caminhoesDia <= 0 || diasLote <= 0) {
                alert('Preencha todos os campos com valores válidos');
                return;
            }
            
            const valorCaminhao = peso * valorKg;
            const valorDia = valorCaminhao * caminhoesDia;
            const valorLote = valorDia * diasLote;
            
            document.getElementById('valor-caminhao').textContent = valorCaminhao.toFixed(2);
            document.getElementById('valor-dia').textContent = valorDia.toFixed(2);
            document.getElementById('valor-lote').textContent = valorLote.toFixed(2);
            document.getElementById('rendimento-result').style.display = 'block';
        });
        
        // Ordens de Serviço
        let osList = [];
        let editingOsId = null;
        
        const osModal = document.getElementById('os-modal');
        const osModalClose = document.querySelector('#os-modal .close');
        const novaOsBtn = document.getElementById('nova-os');
        const saveOsBtn = document.getElementById('save-os');
        const deleteOsBtn = document.getElementById('delete-os');
        
        function renderOsTable() {
            const tableBody = document.querySelector('#os-table tbody');
            tableBody.innerHTML = '';
            
            osList.forEach(os => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${os.titulo}</td>
                    <td>${os.descricao}</td>
                    <td>${os.prioridade}</td>
                    <td>${os.status}</td>
                    <td>
                        <button class="edit-os" data-id="${os.id}">Editar</button>
                        <button class="delete-os" data-id="${os.id}">Excluir</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Add event listeners to edit and delete buttons
            document.querySelectorAll('.edit-os').forEach(btn => {
                btn.addEventListener('click', function() {
                    const osId = parseInt(this.getAttribute('data-id'));
                    editOs(osId);
                });
            });
            
            document.querySelectorAll('.delete-os').forEach(btn => {
                btn.addEventListener('click', function() {
                    const osId = parseInt(this.getAttribute('data-id'));
                    if (confirm('Tem certeza que deseja excluir esta OS?')) {
                        deleteOs(osId);
                    }
                });
            });
        }
        
        function editOs(id) {
            const os = osList.find(item => item.id === id);
            if (!os) return;
            
            editingOsId = id;
            document.getElementById('os-modal-title').textContent = 'Editar Ordem de Serviço';
            document.getElementById('os-titulo').value = os.titulo;
            document.getElementById('os-descricao').value = os.descricao;
            document.getElementById('os-prioridade').value = os.prioridade;
            document.getElementById('os-status').value = os.status;
            document.getElementById('os-id').value = os.id;
            deleteOsBtn.style.display = 'inline-block';
            osModal.style.display = 'block';
        }
        
        function deleteOs(id) {
            osList = osList.filter(item => item.id !== id);
            renderOsTable();
            if (editingOsId === id) {
                osModal.style.display = 'none';
                editingOsId = null;
            }
        }
        
        novaOsBtn.addEventListener('click', function() {
            document.getElementById('os-modal-title').textContent = 'Nova Ordem de Serviço';
            document.getElementById('os-titulo').value = '';
            document.getElementById('os-descricao').value = '';
            document.getElementById('os-prioridade').value = 'Média';
            document.getElementById('os-status').value = 'Aberto';
            document.getElementById('os-id').value = '';
            deleteOsBtn.style.display = 'none';
            osModal.style.display = 'block';
        });
        
        osModalClose.addEventListener('click', function() {
            osModal.style.display = 'none';
            editingOsId = null;
        });
        
        window.addEventListener('click', function(event) {
            if (event.target === osModal) {
                osModal.style.display = 'none';
                editingOsId = null;
            }
        });
        
        saveOsBtn.addEventListener('click', function() {
            const titulo = document.getElementById('os-titulo').value;
            const descricao = document.getElementById('os-descricao').value;
            const prioridade = document.getElementById('os-prioridade').value;
            const status = document.getElementById('os-status').value;
            const id = document.getElementById('os-id').value;
            
            if (!titulo || !descricao) {
                alert('Preencha pelo menos o título e a descrição');
                return;
            }
            
            if (id) {
                // Editing existing OS
                const index = osList.findIndex(item => item.id === parseInt(id));
                if (index !== -1) {
                    osList[index] = {
                        id: parseInt(id),
                        titulo,
                        descricao,
                        prioridade,
                        status
                    };
                }
            } else {
                // Adding new OS
                osList.push({
                    id: Date.now(),
                    titulo,
                    descricao,
                    prioridade,
                    status
                });
            }
            
            osModal.style.display = 'none';
            editingOsId = null;
            renderOsTable();
        });
        
        deleteOsBtn.addEventListener('click', function() {
            const id = parseInt(document.getElementById('os-id').value);
            if (confirm('Tem certeza que deseja excluir esta OS?')) {
                deleteOs(id);
                osModal.style.display = 'none';
            }
        });
        
        // Contato
        document.getElementById('enviar-contato').addEventListener('click', function() {
            const nome = document.getElementById('contato-nome').value;
            const email = document.getElementById('contato-email').value;
            const telefone = document.getElementById('contato-telefone').value;
            const mensagem = document.getElementById('contato-mensagem').value;
            
            if (!nome || !email || !mensagem) {
                alert('Preencha pelo menos o nome, email e mensagem');
                return;
            }
            
            // In a real application, you would send this data to a server
            document.getElementById('contato-result').innerHTML = `
                <p>Mensagem enviada com sucesso!</p>
                <p>Entraremos em contato em breve.</p>
            `;
            document.getElementById('contato-result').style.display = 'block';
            
            // Clear form
            document.getElementById('contato-nome').value = '';
            document.getElementById('contato-email').value = '';
            document.getElementById('contato-telefone').value = '';
            document.getElementById('contato-mensagem').value = '';
        });
        
        // Initialize
        renderCalendar();
    </script>
</body>
</html>